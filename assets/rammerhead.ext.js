(()=>{var e={187:e=>{"use strict";var t,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!=e};function i(){i.init.call(this)}e.exports=i,e.exports.once=function(e,t){return new Promise((function(n,r){function o(n){e.removeListener(t,i),r(n)}function i(){"function"==typeof e.removeListener&&e.removeListener("error",o),n([].slice.call(arguments))}w(e,t,i,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&w(e,"error",t,{once:!0})}(e,o)}))},i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var a=10;function s(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?i.defaultMaxListeners:e._maxListeners}function l(e,t,n,r){var o,i,a,l;if(s(n),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events),a=i[t]),void 0===a)a=i[t]=n,++e._eventsCount;else if("function"==typeof a?a=i[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(o=c(e))>0&&a.length>o&&!a.warned){a.warned=!0;var h=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");h.name="MaxListenersExceededWarning",h.emitter=e,h.type=t,h.count=a.length,l=h,console&&console.warn&&console.warn(l)}return e}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function u(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},o=h.bind(r);return o.listener=n,r.wrapFn=o,o}function d(e,t,n){var r=e._events;if(void 0===r)return[];var o=r[t];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(o):f(o,o.length)}function m(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function f(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function w(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function o(i){r.once&&e.removeEventListener(t,o),n(i)}))}}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");a=e}}),i.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},i.prototype.getMaxListeners=function(){return c(this)},i.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var o="error"===e,i=this._events;if(void 0!==i)o=o&&void 0===i.error;else if(!o)return!1;if(o){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var c=i[e];if(void 0===c)return!1;if("function"==typeof c)r(c,this,t);else{var l=c.length,h=f(c,l);for(n=0;n<l;++n)r(h[n],this,t)}return!0},i.prototype.addListener=function(e,t){return l(this,e,t,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(e,t){return l(this,e,t,!0)},i.prototype.once=function(e,t){return s(t),this.on(e,u(this,e,t)),this},i.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,u(this,e,t)),this},i.prototype.removeListener=function(e,t){var n,r,o,i,a;if(s(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,i=n.length-1;i>=0;i--)if(n[i]===t||n[i].listener===t){a=n[i].listener,o=i;break}if(o<0)return this;0===o?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,o),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var o,i=Object.keys(n);for(r=0;r<i.length;++r)"removeListener"!==(o=i[r])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},i.prototype.listeners=function(e){return d(this,e,!0)},i.prototype.rawListeners=function(e){return d(this,e,!1)},i.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},i.prototype.listenerCount=m,i.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},735:e=>{var t=function(e,t){return(e%t+t)%t},n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~-",r="_rhs",o=function(){for(var e="",t=n.split("");t.length>0;)e+=t.splice(Math.floor(Math.random()*t.length),1)[0];return e},i=function(){"use strict";function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o();(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.dictionary=t}return function(e,t,n){const r=function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}};t&&r(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"shuffle",value:function(e){if(e.startsWith(r))return e;for(var o="",i=0;i<e.length;i++){var a=e.charAt(i),s=n.indexOf(a);"%"===a&&e.length-i>=3?(o+=a,o+=e.charAt(++i),o+=e.charAt(++i)):o+=-1===s?a:this.dictionary.charAt(t(s+i,n.length))}return r+o}},{key:"unshuffle",value:function(e){if(!e.startsWith(r))return e;e=e.slice(r.length);for(var o="",i=0;i<e.length;i++){var a=e.charAt(i),s=this.dictionary.indexOf(a);"%"===a&&e.length-i>=3?(o+=a,o+=e.charAt(++i),o+=e.charAt(++i)):o+=-1===s?a:n.charAt(t(s-i,n.length))}return o}}]),e}();i.baseDictionary=n,i.shuffledIndicator=r,i.generateDictionary=o,e.exports=i},154:e=>{e.exports=[{keys:[18,86],executed:!1,exec:function(e){globalThis.Rammerhead.versionVerbose=!globalThis.Rammerhead.versionVerbose,toggleVersionVerbose(globalThis.Rammerhead.versionVerbose)}},{keys:[18,72,91],executed:!1,exec:function(e){!0===globalThis.Rammerhead.darkMode?rhTheming.setEnabled(!1):rhTheming.setEnabled(!0)}},{keys:[17,18,72],executed:!1,exec:function(e){!0===globalThis.Rammerhead.darkMode?rhTheming.setEnabled(!1):rhTheming.setEnabled(!0)}},{keys:[18,84,91],executed:!1,exec:function(e){const t=prompt("Insert Theme CSS Link:");rhTheming.setURL(t)}},{keys:[16,18,84],executed:!1,exec:function(e){chromeTabs.activeTabEl?chromeTabs.addTab({},{background:!0}):chromeTabs.addTab({})}},{keys:[18,84],executed:!1,exec:function(e){chromeTabs.addTab({})}},{keys:[18,82],executed:!1,exec:function(e){try{let e=document.querySelector("div.browser-tab-content iframe[style='display: block;']");e&&(console.log(e),e.contentWindow.location.reload())}catch(e){console.warn(e)}}},{keys:[16,18,80],executed:!1,exec:function(e){try{window.print()}catch(e){console.warn(e)}}},{keys:[18,87],executed:!1,exec:function(e){chromeTabs.removeTab(chromeTabs.activeTabEl)}},{keys:[16,17,73],executed:!1,exec:function(e){console.debug("Launching DevTools"),chromeTabs.activeTabEl.state.iframe&&chromeTabs.activeTabEl.state.iframe.contentWindow.eval(chromeTabs.activeTabEl.state.iframe.contentWindow.__proc$Script('eval(atob("Y29uc3QgbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpO28uc3JjID0gImh0dHBzOi8vZGV2dG9vbHMubGhvc3QuZGV2L3NjcmlwdHMvbGF1bmNoZXIuanMiO2RvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQobyk7"))'))}}]}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}(()=>{n(187);const e=document.currentScript?new URL(document.currentScript.src,document.location.href).hostname:"settings.lhost.dev";document.waitForElement=function(e){return new Promise((t=>{if(document.querySelector(e))return t(document.querySelector(e));const n=new MutationObserver((r=>{document.querySelector(e)&&(t(document.querySelector(e)),n.disconnect())}));n.observe(document.body,{childList:!0,subtree:!0})}))},document.waitForGlobal=function(e,t){return new Promise(((n,r)=>{var o=e.split(".");!function(e,t){for(var n=0;n<t.length;n++){if(!e||!e.hasOwnProperty(t[n]))return!1;e=e[t[n]]}return!0}(globalThis,o)?setTimeout((function(){document.waitForGlobal(e,n)}),100):(t&&t(),n(!0))}))},window.getFrames=async function(){let e;rhSession.getShuffler?e=await rhSession.getShuffler():(e=new(n(735)),e.dictionary=JSON.parse((await rhSession._getAllData("data")).find((e=>"sessionData"===e.type)).sessionData).data.shuffleDict);let t={};for(const n of Object.keys(window.frames).filter((e=>"number"==typeof parseInt(e)&&!0!==isNaN(parseInt(e)))))t[n]=window.frames[n],t[e.unshuffle(window.frames[n].location.href.split("/").slice(4).join("/"))]=window.frames[n];return t},document.waitForElement(".chrome-tabs").then((t=>{console.log("Found Chrome-Tabs Instance"),document.waitForGlobal("rhSession.id").then((async()=>{console.log("Injecting Now!");const r=async function(){return(await fetch("https://cdn.jsdelivr.net/gh/TheRealGeoDash2019/Rammerhead-Patches@main/authorizedDomains.json").then((e=>e.json()))).domains};globalThis.Rammerhead={darkMode:!0,versionVerbose:!0},globalThis.toggleVersionVerbose=function(e=!1){document.querySelectorAll(".rhnewtab-version-container").forEach((t=>{t.style.display=e?"":"none"}))},globalThis.toggleTheme=async function(e=!0){if(!1===e){globalThis.Rammerhead.darkMode=!1,document.documentElement.classList.remove("dark-theme"),document.documentElement.classList.remove("custom-theme"),document.documentElement.classList.add("light-theme"),t.classList.remove("chrome-tabs-dark-theme"),t.classList.add("chrome-tabs-light-theme");const e=await rhTheming.getURL()||(window.localStorage.getItem("theme:cssLocation")?window.localStorage.getItem("theme:cssLocation"):"rh://themes/dark"),n={active:globalThis.Rammerhead.darkMode,theme:globalThis.Rammerhead.darkMode?e:"rh://themes/light"},o=await r();Object.entries(await window.getFrames()).filter((e=>{try{const{hostname:t}=new URL(e[0]);return!!o.includes(t)}catch(e){return!1}})).forEach((e=>{let t=new CustomEvent("themeState");t.themeState=n,e[1].dispatchEvent(t)}))}else{globalThis.Rammerhead.darkMode=!0,document.documentElement.classList.add("dark-theme"),document.documentElement.classList.add("custom-theme"),document.documentElement.classList.remove("light-theme"),t.classList.add("chrome-tabs-dark-theme"),t.classList.remove("chrome-tabs-light-theme");const e=await rhTheming.getURL()||(window.localStorage.getItem("theme:cssLocation")?window.localStorage.getItem("theme:cssLocation"):"rh://themes/dark"),n={active:globalThis.Rammerhead.darkMode,theme:globalThis.Rammerhead.darkMode?e:"rh://themes/light"},o=await r();Object.entries(await window.getFrames()).filter((e=>{try{const{hostname:t}=new URL(e[0]);return!!o.includes(t)}catch(e){return!1}})).forEach((e=>{let t=new CustomEvent("themeState");t.themeState=n,e[1].dispatchEvent(t)}))}},globalThis.setThemeURL=function(e){if(e){if(console.log("Updating Theme CSS: "+e),window.localStorage.setItem("theme:cssLocation",e),e.replaceAll(" ","").length<1)return document.querySelectorAll("link.custom-theming").forEach((e=>{e.remove()})),null;document.querySelectorAll("link.custom-theming").forEach((e=>{e.remove()}));let t=document.createElement("link");return t.rel="stylesheet",t.href=e,t.className="custom-theming",document.head.appendChild(t),e}return console.log("Removing Theme CSS..."),window.localStorage.removeItem("theme:cssLocation"),document.querySelectorAll("link.custom-theming").forEach((e=>{e.remove()})),null},globalThis.rhTheming={getEnabled:async function(){if(!rhSession)return!0;const e=(await rhSession._getAllData("data")).find((e=>"tabTheming"===e.type));return!!e&&e.data.enabled},getURL:async function(){if(!rhSession)return null;const e=(await rhSession._getAllData("data")).find((e=>"tabTheming"===e.type));return e?e.data.url:null},setEnabled:async function(e=!0){if(!rhSession)return;const t=await rhSession._getAllData("data"),n=t.find((e=>"tabTheming"===e.type));n?n.data.enabled=e:t.push({type:"tabTheming",data:{enabled:e,url:null}}),console.log(n),console.log(t),await rhSession._putAllData("data",t),globalThis.toggleTheme(e)},setURL:async function(e){if(!rhSession)return null;const t=await rhSession._getAllData("data"),n=t.find((e=>"tabTheming"===e.type));n?n.data.url=e:t.push({type:"tabTheming",data:{enabled:!0,url:e}}),console.log(n),console.log(t),await rhSession._putAllData("data",t),globalThis.setThemeURL(e)}},globalThis.setBrowserTitle=async function(e){await rhSession.setTabTitle(e);const t={hostname:window.location.hostname,title:await rhSession.getTabTitle(),favicon:await rhSession.getTabFavicon()},n=await r();Object.entries(await window.getFrames()).filter((e=>{try{const{hostname:t}=new URL(e[0]);return!!n.includes(t)}catch(e){return!1}})).forEach((e=>{let n=new CustomEvent("tabState");n.tabState=t,e[1].dispatchEvent(n)}))},globalThis.setBrowserFavIcon=async function(e){await rhSession.setTabFavicon(e);const t={hostname:window.location.hostname,title:await rhSession.getTabTitle(),favicon:await rhSession.getTabFavicon()},n=await r();Object.entries(await window.getFrames()).filter((e=>{try{const{hostname:t}=new URL(e[0]);return!!n.includes(t)}catch(e){return!1}})).forEach((e=>{let n=new CustomEvent("tabState");n.tabState=t,e[1].dispatchEvent(n)}))},globalThis.setHTTPProxy=async function(e){await rhSession.setHttpProxySetting(e);const t=await rhSession.getHttpProxySetting(),n={endpoint:t?"http://"+t.proxyAuth+"@"+t.host:""},o=await r();Object.entries(await window.getFrames()).filter((e=>{try{const{hostname:t}=new URL(e[0]);return!!o.includes(t)}catch(e){return!1}})).forEach((e=>{let t=new CustomEvent("proxyState");t.proxyState=n,e[1].dispatchEvent(t)}))};const o={},i=n(154);window.addEventListener("keydown",(e=>{function t(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}o[e.keyCode]={key:e.key,keyCode:e.keyCode,pressed:!0};for(const n of i)!1===n.executed&&t(n.keys,Object.values(o).filter((e=>e.pressed)).map((e=>e.keyCode)))&&(e.preventDefault(),!1===n.executed&&n.exec(e))})),window.addEventListener("keyup",(e=>{o[e.keyCode]={key:e.key,keyCode:e.keyCode,pressed:!1};for(const e of i)e.executed=!1})),window.addEventListener("blur",(()=>{Object.keys(o).map((e=>{o[e].pressed=!1}))})),window.addEventListener("beforeprint",(()=>{document.querySelector("div.chrome-tabs").style.display="none",document.querySelector("div.browser-bar").style.display="none"})),window.addEventListener("afterprint",(()=>{Object.keys(o).map((e=>{o[e].pressed=!1})),document.querySelector("div.chrome-tabs").style.display="",document.querySelector("div.browser-bar").style.display=""}));let a=document.createElement("link");a.rel="stylesheet",a.href=`https://${e}/assets/rammerhead.ext.css`,document.head.appendChild(a);let s=await rhTheming.getURL()||window.localStorage.getItem("theme:cssLocation");s&&rhTheming.setURL(s),t.addEventListener("activeTabChange",(e=>{toggleVersionVerbose(globalThis.Rammerhead.versionVerbose)})),t.addEventListener("tabAdd",(e=>{toggleVersionVerbose(globalThis.Rammerhead.versionVerbose)})),t.addEventListener("tabRemove",(e=>{toggleVersionVerbose(globalThis.Rammerhead.versionVerbose)})),window.addEventListener("requestThemeConfig",(async e=>{const t=await rhTheming.getURL()||(window.localStorage.getItem("theme:cssLocation")?window.localStorage.getItem("theme:cssLocation"):"rh://themes/dark"),n={active:globalThis.Rammerhead.darkMode,theme:globalThis.Rammerhead.darkMode?t:"rh://themes/light"},o=await r();Object.entries(await window.getFrames()).filter((e=>{try{const{hostname:t}=new URL(e[0]);return!!o.includes(t)}catch(e){return!1}})).forEach((e=>{let t=new CustomEvent("themeState");t.themeState=n,e[1].dispatchEvent(t)}))})),window.addEventListener("requestTabConfig",(async e=>{const t={hostname:window.location.hostname,title:await rhSession.getTabTitle(),favicon:await rhSession.getTabFavicon()},n=await r();Object.entries(await window.getFrames()).filter((e=>{try{const{hostname:t}=new URL(e[0]);return!!n.includes(t)}catch(e){return!1}})).forEach((e=>{let n=new CustomEvent("tabState");n.tabState=t,e[1].dispatchEvent(n)}))})),window.addEventListener("requestProxyConfig",(async e=>{const t=await rhSession.getHttpProxySetting(),n=await r();if(!t||!t.proxyAuth||!t.host){const e={endpoint:""},t=await r();Object.entries(await window.getFrames()).filter((e=>{try{const{hostname:n}=new URL(e[0]);return!!t.includes(n)}catch(e){return!1}})).forEach((t=>{let n=new CustomEvent("proxyState");n.proxyState=e,t[1].dispatchEvent(n)}))}const o={endpoint:t?"http://"+t.proxyAuth+"@"+t.host:""};Object.entries(await window.getFrames()).filter((e=>{try{const{hostname:t}=new URL(e[0]);return!!n.includes(t)}catch(e){return!1}})).forEach((e=>{let t=new CustomEvent("proxyState");t.proxyState=o,e[1].dispatchEvent(t)}))})),window.addEventListener("requestBrowserInfo",(async e=>{const t={profileCreatedAt:await rhSession.getProfileCreationTime(),browserVersion:await fetch("/version").then((e=>e.text())),rammerheadVersion:await fetch("/version-opensource").then((e=>e.text())),rammerheadRegion:await fetch("/rhdc/region").then((e=>e.text()))},n=await r();Object.entries(await window.getFrames()).filter((e=>{try{const{hostname:t}=new URL(e[0]);return!!n.includes(t)}catch(e){return!1}})).forEach((e=>{let n=new CustomEvent("infoState");n.infoState=t,e[1].dispatchEvent(n)}))})),setTimeout((()=>{toggleTheme(globalThis.Rammerhead.darkMode),toggleVersionVerbose(globalThis.Rammerhead.versionVerbose),async function(){const e={hostname:window.location.hostname,title:await rhSession.getTabTitle(),favicon:await rhSession.getTabFavicon()},t=await r();Object.entries(await window.getFrames()).filter((e=>{try{const{hostname:n}=new URL(e[0]);return!!t.includes(n)}catch(e){return!1}})).forEach((t=>{let n=new CustomEvent("tabState");n.tabState=e,t[1].dispatchEvent(n)}))}(),async function(){const e=await rhSession.getHttpProxySetting();if(!e||!e.proxyAuth||!e.host){const e={endpoint:""},t=await r();Object.entries(await window.getFrames()).filter((e=>{try{const{hostname:n}=new URL(e[0]);return!!t.includes(n)}catch(e){return!1}})).forEach((t=>{let n=new CustomEvent("proxyState");n.proxyState=e,t[1].dispatchEvent(n)}))}const t={endpoint:e?"http://"+e.proxyAuth+"@"+e.host:""},n=await r();Object.entries(await window.getFrames()).filter((e=>{try{const{hostname:t}=new URL(e[0]);return!!n.includes(t)}catch(e){return!1}})).forEach((e=>{let n=new CustomEvent("proxyState");n.proxyState=t,e[1].dispatchEvent(n)}))}(),async function(){const e={profileCreatedAt:await rhSession.getProfileCreationTime(),browserVersion:await fetch("/version").then((e=>e.text())),rammerheadVersion:await fetch("/version-opensource").then((e=>e.text())),rammerheadRegion:await fetch("/rhdc/region").then((e=>e.text()))},t=await r();Object.entries(await window.getFrames()).filter((e=>{try{const{hostname:n}=new URL(e[0]);return!!t.includes(n)}catch(e){return!1}})).forEach((t=>{let n=new CustomEvent("infoState");n.infoState=e,t[1].dispatchEvent(n)}))}(),globalThis.rhExtInject=!0,window.onload=null}),500)})).catch((e=>{console.log(e)}))})).catch((e=>{console.log(e)}))})()})();